<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated Newsletter Popup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        #popup.active {
            visibility: visible;
            opacity: 1;
        }

        #popup.active .popup-content {
            transform: scale(1) translateY(0);
            opacity: 1;
        }
        
        #popup {
            transition: visibility 0s, opacity 0.3s ease;
        }

        .popup-content {
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Main page content -->
    <div class="container mx-auto p-8 h-[200vh]">
        <h1 class="text-4xl font-bold mb-4">Animated Newsletter Popup Example</h1>
        <p class="text-gray-700 max-w-2xl">
            This page demonstrates an animated newsletter popup. It will appear automatically after a 5-second delay.
            Alternatively, try moving your mouse cursor quickly towards the top of the browser window as if you're about to close the tab. This "exit intent" will also trigger the popup.
        </p>
    </div>

    <!-- Popup Container -->
    <div id="popup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 opacity-0 invisible">
        <!-- Popup Content -->
        <div id="popup-content" class="popup-content bg-white rounded-2xl shadow-2xl w-full max-w-md mx-auto p-8 relative transform scale-95 -translate-y-10 opacity-0">
            
            <!-- Close Button -->
            <button id="close-popup" class="absolute top-4 right-4 text-gray-400 hover:text-gray-800 transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            
            <!-- Main Content: Form View -->
            <div id="form-view">
                <div class="text-center">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Get Our Weekly Updates!</h2>
                    <p class="text-gray-600 mb-6">Join our newsletter to stay up to date on features and releases.</p>
                </div>
                
                <form id="newsletter-form">
                    <div class="mb-4">
                        <label for="email" class="sr-only">Email</label>
                        <input type="email" id="email" name="email" placeholder="Enter your email" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
                    </div>
                    <button type="submit" class="w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform transform hover:scale-105">
                        Subscribe
                    </button>
                </form>

                <p class="text-xs text-gray-400 text-center mt-4">We respect your privacy. Unsubscribe at any time.</p>
            </div>

             <!-- Main Content: Success View (hidden by default) -->
            <div id="success-view" class="hidden">
                 <div class="text-center">
                    <div class="mx-auto bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mb-4">
                        <svg class="w-10 h-10 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Thank You!</h2>
                    <p class="text-gray-600">You've successfully subscribed to our newsletter.</p>
                </div>
            </div>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const popup = document.getElementById('popup');
            const popupContent = document.getElementById('popup-content');
            const closePopupButton = document.getElementById('close-popup');
            const newsletterForm = document.getElementById('newsletter-form');
            const formView = document.getElementById('form-view');
            const successView = document.getElementById('success-view');

            let popupShown = false;


            const showPopup = () => {
                if (popupShown) return; // Don't show if it has already been shown
                popup.classList.add('active');
                document.body.style.overflow = 'hidden'; 
                popupShown = true;
            };

            const hidePopup = () => {
                popup.classList.remove('active');
                 document.body.style.overflow = 'auto'; 
            };
            

            const timerId = setTimeout(showPopup, 5000);

            document.addEventListener('mouseleave', (e) => {
                // Check if cursor is near the top of the viewport
                if (e.clientY <= 0) {
                    clearTimeout(timerId); 
                    showPopup();
                }
            });

            closePopupButton.addEventListener('click', hidePopup);

            popup.addEventListener('click', (e) => {
                if (e.target === popup) {
                    hidePopup();
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && popup.classList.contains('active')) {
                    hidePopup();
                }
            });

            newsletterForm.addEventListener('submit', (e) => {
                e.preventDefault(); 

                formView.classList.add('hidden');
                successView.classList.remove('hidden');

                setTimeout(() => {
                    hidePopup();

                    setTimeout(() => {
                        formView.classList.remove('hidden');
                        successView.classList.add('hidden');
                    }, 500); 

                }, 2000);
            });
        });
    </script>

</body>
</html>
